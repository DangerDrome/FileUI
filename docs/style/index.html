<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FileUI Complete Test</title>
    
    <!-- Load Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Load styles -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Load Lucide icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Load UI system -->
    <script src="styles.js"></script>
</head>
<body>
    <!-- Main content with navigation spacing -->
    <div class="main-content">
        <div style="padding: var(--space-8);">
            <h1>FileUI Complete Component Library</h1>
            <p class="lead">All UI components with navigation panel and theme toggle</p>
            
            <!-- Colors Section -->
            <div class="section">
                <div class="card">
                    <div class="card-header">
                        <div class="card-header-left"><i data-lucide="palette" class="card-icon"></i><h2 class="card-title">Colors</h2></div>
                    </div>
                    <div class="card-body">
                    <h5>Semantic Colors</h5>
                    <div class="demo-row">
                        <div style="background: var(--primary); padding: var(--space-3); border-radius: var(--radius-md); color: var(--grey-800);">Primary</div>
                        <div style="background: var(--success); padding: var(--space-3); border-radius: var(--radius-md); color: var(--grey-800);">Success</div>
                        <div style="background: var(--warning); padding: var(--space-3); border-radius: var(--radius-md); color: var(--grey-800);">Warning</div>
                        <div style="background: var(--error); padding: var(--space-3); border-radius: var(--radius-md); color: var(--grey-800);">Error</div>
                        <div style="background: var(--info); padding: var(--space-3); border-radius: var(--radius-md); color: var(--grey-800);">Info</div>
                    </div>
                    
                    
                    <h5>Background Hierarchy</h5>
                    <div class="demo-row">
                        <div style="background: var(--bg-quaternary); padding: var(--space-3); border-radius: var(--radius-md); color: var(--text-primary);">Quaternary BG</div>
                        <div style="background: var(--bg-primary); padding: var(--space-3); border-radius: var(--radius-md); color: var(--text-primary);">Primary BG</div>
                        <div style="background: var(--bg-secondary); padding: var(--space-3); border-radius: var(--radius-md); color: var(--text-primary);">Secondary BG</div>
                        <div style="background: var(--bg-tertiary); padding: var(--space-3); border-radius: var(--radius-md); color: var(--text-primary);">Tertiary BG</div>
                    </div>
                    
                    </div>
                </div>
            </div>

            <!-- Typography Section -->
            <div class="section">
                <div class="card">
                    <div class="card-header">
                        <div class="card-header-left"><i data-lucide="type" class="card-icon"></i><h2 class="card-title">Typography</h2></div>
                    </div>
                    <div class="card-body">
                    <h5>Heading Scale</h5>
                    <h1>Heading 1</h1>
                    <h2>Heading 2 - Section Title</h2>
                    <h5>Heading 3 - Subsection Title</h5>
                    <h4>Heading 4 - Component Title</h4>
                    <h5>Heading 5 - Small Section</h5>
                    <h6>Heading 6 - Caption</h6>
                    
                    <h5>Paragraph Styles</h5>
                    <p class="lead"><strong>This is a lead paragraph</strong> with <em>italic text</em>, <u>underlined text</u>, <s>strikethrough text</s>, <mark>highlighted text</mark>, <code>inline code</code>, and <kbd>keyboard input</kbd>.</p>
                    
                    <p><strong>This is a standard paragraph</strong> with <em>emphasized text</em>, <strong><em>bold italic</em></strong>, <sup>superscript</sup>, <sub>subscript</sub>, <abbr title="Abbreviation">ABBR</abbr>, and <a href="#">linked text</a>. It has optimal line height for readability.</p>
                    
                    <p class="small"><strong>This is a small paragraph</strong> with <var>variable</var>, <samp>sample output</samp>, <del>deleted text</del>, <ins>inserted text</ins>, <q>inline quote</q>, and <cite>citation</cite> examples.</p>
                    </div>
                </div>
            </div>

            <!-- Grid System Section -->
            <div class="section">
                <div class="card">
                    <div class="card-header">
                        <div class="card-header-left"><i data-lucide="grid" class="card-icon"></i><h2 class="card-title">Grid System</h2></div>
                    </div>
                    <div class="card-body">
                    <h5>2 Column Grid</h5>
                    <div class="grid grid-2">
                        <div style="background: var(--bg-tertiary); padding: var(--space-4); border-radius: var(--radius-md); text-align: center;">
                            Grid Item 1
                        </div>
                        <div style="background: var(--bg-tertiary); padding: var(--space-4); border-radius: var(--radius-md); text-align: center;">
                            Grid Item 2
                        </div>
                    </div>
                    
                    <h5>3 Column Grid</h5>
                    <div class="grid grid-3">
                        <div style="background: var(--bg-tertiary); padding: var(--space-4); border-radius: var(--radius-md); text-align: center;">
                            Item 1
                        </div>
                        <div style="background: var(--bg-tertiary); padding: var(--space-4); border-radius: var(--radius-md); text-align: center;">
                            Item 2
                        </div>
                        <div style="background: var(--bg-tertiary); padding: var(--space-4); border-radius: var(--radius-md); text-align: center;">
                            Item 3
                        </div>
                    </div>
                    
                    <h5>Auto-fit Grid</h5>
                    <div class="grid grid-auto-fit">
                        <div style="background: var(--bg-tertiary); padding: var(--space-4); border-radius: var(--radius-md); text-align: center;">
                            Responsive 1
                        </div>
                        <div style="background: var(--bg-tertiary); padding: var(--space-4); border-radius: var(--radius-md); text-align: center;">
                            Responsive 2
                        </div>
                        <div style="background: var(--bg-tertiary); padding: var(--space-4); border-radius: var(--radius-md); text-align: center;">
                            Responsive 3
                        </div>
                        <div style="background: var(--bg-tertiary); padding: var(--space-4); border-radius: var(--radius-md); text-align: center;">
                            Responsive 4
                        </div>
                    </div>
                    </div>
                </div>
            </div>

            <!-- Cards Section -->
            <div class="section">
                <div class="card">
                    <div class="card-header">
                        <div class="card-header-left"><i data-lucide="square" class="card-icon"></i><h2 class="card-title">Cards</h2></div>
                    </div>
                    <div class="card-body">
                        <div class="grid grid-auto-fit-3" id="card-demo"></div>
                    </div>
                </div>
            </div>

            <!-- Buttons Section -->
            <div class="section">
                <div class="card">
                    <div class="card-header">
                        <div class="card-header-left"><i data-lucide="mouse-pointer" class="card-icon"></i><h2 class="card-title">Buttons</h2></div>
                    </div>
                    <div class="card-body">
                        <div class="demo-row">
                            <div class="tooltip-wrapper">
                                <button class="btn">Default Button</button>
                                <div class="tooltip">Standard button for general actions</div>
                            </div>
                            <div class="tooltip-wrapper">
                                <button class="btn btn-primary">Primary Button</button>
                                <div class="tooltip">Primary action button with emphasis</div>
                            </div>
                            <div class="tooltip-wrapper">
                                <button class="btn btn-sm">Small Button</button>
                                <div class="tooltip">Compact button for limited space</div>
                            </div>
                            <div class="tooltip-wrapper">
                                <button class="btn btn-lg">Large Button</button>
                                <div class="tooltip">Large button for prominent actions</div>
                            </div>
                            <div class="tooltip-wrapper">
                                <button class="btn" disabled>Disabled</button>
                                <div class="tooltip">Button in disabled state</div>
                            </div>
                        </div>
                        
                        <h5>Semantic Button Colors</h5>
                        <div class="demo-row">
                            <div class="tooltip-wrapper">
                                <button class="btn btn-success">Success</button>
                                <div class="tooltip">Success action (save, confirm)</div>
                            </div>
                            <div class="tooltip-wrapper">
                                <button class="btn btn-warning">Warning</button>
                                <div class="tooltip">Warning action (caution required)</div>
                            </div>
                            <div class="tooltip-wrapper">
                                <button class="btn btn-error">Error</button>
                                <div class="tooltip">Destructive action (delete, remove)</div>
                            </div>
                            <div class="tooltip-wrapper">
                                <button class="btn btn-info">Info</button>
                                <div class="tooltip">Informational action (details, help)</div>
                            </div>
                        </div>
                        
                        <h5>Active States</h5>
                        <div class="demo-row">
                            <button class="btn active">Active Default</button>
                            <button class="btn btn-primary active">Active Primary</button>
                            <button class="btn btn-success active">Active Success</button>
                            <button class="btn btn-warning active">Active Warning</button>
                            <button class="btn btn-error active">Active Error</button>
                            <button class="btn btn-info active">Active Info</button>
                        </div>
                        
                        <h5>Icon Buttons</h5>
                        <div class="demo-row">
                            <div class="tooltip-wrapper">
                                <button class="btn" onclick="UI.toast('Edit action', 'info')">
                                    <i data-lucide="edit"></i>
                                </button>
                                <div class="tooltip">Edit item</div>
                            </div>
                            <div class="tooltip-wrapper">
                                <button class="btn btn-primary" onclick="UI.toast('Save action', 'success')">
                                    <i data-lucide="save"></i>
                                </button>
                                <div class="tooltip">Save changes</div>
                            </div>
                            <div class="tooltip-wrapper">
                                <button class="btn btn-error" onclick="UI.toast('Delete action', 'error')">
                                    <i data-lucide="trash-2"></i>
                                </button>
                                <div class="tooltip">Delete item</div>
                            </div>
                            <div class="tooltip-wrapper">
                                <button class="btn btn-sm" onclick="UI.toast('Settings', 'info')">
                                    <i data-lucide="settings"></i>
                                </button>
                                <div class="tooltip">Open settings</div>
                            </div>
                            <div class="tooltip-wrapper">
                                <button class="btn btn-lg btn-success" onclick="UI.toast('Add new', 'success')">
                                    <i data-lucide="plus"></i>
                                </button>
                                <div class="tooltip">Add new item</div>
                            </div>
                        </div>
                        
                        <h5>Dynamic Buttons</h5>
                        <div class="demo-row" id="dynamic-buttons"></div>
                    </div>
                </div>
            </div>

            <!-- Toast Section -->
            <div class="section">
                <div class="card">
                    <div class="card-header">
                        <div class="card-header-left"><i data-lucide="bell" class="card-icon"></i><h2 class="card-title">Toast Notifications</h2></div>
                    </div>
                    <div class="card-body">
                        <div class="demo-row">
                            <div class="tooltip-wrapper">
                                <button class="btn" onclick="UI.toast('Success message!', 'success')">Success Toast</button>
                                <div class="tooltip">Show success notification</div>
                            </div>
                            <div class="tooltip-wrapper">
                                <button class="btn" onclick="UI.toast('Error occurred!', 'error')">Error Toast</button>
                                <div class="tooltip">Show error notification</div>
                            </div>
                            <div class="tooltip-wrapper">
                                <button class="btn" onclick="UI.toast('Warning message', 'warning')">Warning Toast</button>
                                <div class="tooltip">Show warning notification</div>
                            </div>
                            <div class="tooltip-wrapper">
                                <button class="btn" onclick="UI.toast('Info message', 'info')">Info Toast</button>
                                <div class="tooltip">Show info notification</div>
                            </div>
                        </div>
                        <div class="demo-row">
                            <div class="tooltip-wrapper">
                                <button class="btn" onclick="UI.toast('Loading data...', 'info', { preloader: true, duration: 3000 })">Preloader Toast</button>
                                <div class="tooltip">Toast with loading spinner</div>
                            </div>
                            <div class="tooltip-wrapper">
                                <button class="btn" onclick="UI.toast('Click X to dismiss', 'info', { dismissible: true })">Dismissible Toast</button>
                                <div class="tooltip">Toast with close button</div>
                            </div>
                            <div class="tooltip-wrapper">
                                <button class="btn" onclick="UI.toast('Action required', 'warning', { action: { text: 'Undo', callback: () => UI.toast('Undone!', 'success') }})">Action Toast</button>
                                <div class="tooltip">Toast with action button</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal Section -->
            <div class="section">
                <div class="card">
                    <div class="card-header">
                        <div class="card-header-left"><i data-lucide="layers" class="card-icon"></i><h2 class="card-title">Modals</h2></div>
                    </div>
                    <div class="card-body">
                        <div class="demo-row">
                            <div class="tooltip-wrapper">
                                <button class="btn" onclick="showSimpleModal()">Simple Modal</button>
                                <div class="tooltip">Basic modal with content only</div>
                            </div>
                            <div class="tooltip-wrapper">
                                <button class="btn" onclick="showConfirmModal()">Confirm Modal</button>
                                <div class="tooltip">Modal with confirmation actions</div>
                            </div>
                            <div class="tooltip-wrapper">
                                <button class="btn" onclick="showFormModal()">Form Modal</button>
                                <div class="tooltip">Modal containing form elements</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tooltips & Popovers Section -->
            <div class="section">
                <div class="card">
                    <div class="card-header">
                        <div class="card-header-left"><i data-lucide="message-circle" class="card-icon"></i><h2 class="card-title">Tooltips & Popovers</h2></div>
                    </div>
                    <div class="card-body">
                    <h5>Tooltips</h5>
                    <div class="demo-row">
                        <div class="tooltip-wrapper">
                            <button class="btn">Hover for tooltip</button>
                            <div class="tooltip">This is a helpful tooltip</div>
                        </div>
                        <button class="btn" id="dynamic-tooltip">Dynamic Tooltip</button>
                    </div>
                    
                    <h5>Popovers</h5>
                    <div class="demo-row">
                        <button class="btn" id="static-popover">Click for popover</button>
                        <button class="btn" id="dynamic-popover">Dynamic Popover</button>
                    </div>
                    </div>
                </div>
            </div>

            <!-- Menus Section -->
            <div class="section">
                <div class="card">
                    <div class="card-header">
                        <div class="card-header-left"><i data-lucide="menu" class="card-icon"></i><h2 class="card-title">Menus</h2></div>
                    </div>
                    <div class="card-body">
                        <h5>Navigation Panel Menu</h5>
                        <div class="demo-row">
                            <button class="btn" onclick="showNavMenuConfig()">Show Nav Menu Config</button>
                            <button class="btn" onclick="recreateNavPanel()">Recreate Nav Panel</button>
                        </div>
                        
                        <h5>Dropdown & Context Menus</h5>
                        <div class="demo-row">
                            <button class="btn" onclick="showMenu(this)">Dropdown Menu</button>
                            <button class="btn" onclick="showContextMenuDemo()">Context Menu Demo</button>
                            <div data-context-menu="context-menu-1" class="btn" style="cursor: context-menu;">
                                Right-click me
                            </div>
                        </div>
                        
                        <!-- Hidden context menu -->
                        <div id="context-menu-1" class="context-menu">
                            <button class="menu-item">
                                <i data-lucide="copy"></i> Copy
                            </button>
                            <button class="menu-item">
                                <i data-lucide="cut"></i> Cut
                            </button>
                            <button class="menu-item">
                                <i data-lucide="clipboard"></i> Paste
                            </button>
                            <div class="menu-divider"></div>
                            <button class="menu-item">
                                <i data-lucide="trash-2"></i> Delete
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Panels Section -->
            <div class="section">
                <div class="card">
                    <div class="card-header">
                        <div class="card-header-left"><i data-lucide="layout" class="card-icon"></i><h2 class="card-title">Panels</h2></div>
                    </div>
                    <div class="card-body">
                        <div class="demo-row">
                            <button class="btn" onclick="addPanel()">Add Panel</button>
                            <button class="btn" onclick="addCollapsiblePanel()">Add Collapsible Panel</button>
                        </div>
                        <div id="panels-container"></div>
                    </div>
                </div>
            </div>

            <!-- Tags Section -->
            <div class="section">
                <div class="card">
                    <div class="card-header">
                        <div class="card-header-left"><i data-lucide="tag" class="card-icon"></i><h2 class="card-title">Tags</h2></div>
                    </div>
                    <div class="card-body">
                        <h5>Static Tags</h5>
                        <div class="demo-row">
                            <span class="tag">Default</span>
                            <span class="tag tag-primary">Primary</span>
                            <span class="tag tag-success">Success</span>
                            <span class="tag tag-warning">Warning</span>
                            <span class="tag tag-error">Error</span>
                            <span class="tag tag-info">Info</span>
                        </div>
                        
                        <h5>Tag Sizes</h5>
                        <div class="demo-row">
                            <span class="tag tag-sm tag-primary">Small</span>
                            <span class="tag tag-primary">Normal</span>
                            <span class="tag tag-lg tag-primary">Large</span>
                        </div>
                        
                        <h5>Dynamic Tags</h5>
                        <div class="demo-row">
                            <button class="btn btn-sm" onclick="addTag()">Add Tag</button>
                            <button class="btn btn-sm" onclick="addClosableTag()">Add Closable Tag</button>
                        </div>
                        <div id="tags-container" class="demo-row" style="margin-top: var(--space-4);"></div>
                    </div>
                </div>
            </div>

            <!-- Forms Section -->
            <div class="section">
                <div class="card">
                    <div class="card-header">
                        <div class="card-header-left"><i data-lucide="edit" class="card-icon"></i><h2 class="card-title">Form Elements</h2></div>
                    </div>
                    <div class="card-body">
                    <div class="form-group">
                        <label class="form-label">Input Field</label>
                        <div class="tooltip-wrapper">
                            <input type="text" class="form-input" placeholder="Enter text...">
                            <div class="tooltip">Standard text input field</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Textarea</label>
                        <div class="tooltip-wrapper">
                            <textarea class="form-textarea" placeholder="Enter message..."></textarea>
                            <div class="tooltip">Multi-line text input area</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Select</label>
                        <div class="tooltip-wrapper">
                            <select class="form-select">
                                <option>Option 1</option>
                                <option>Option 2</option>
                                <option>Option 3</option>
                            </select>
                            <div class="tooltip">Dropdown selection menu</div>
                        </div>
                    </div>
                    </div>
                </div>
            </div>

            <!-- Badges Section -->
            <div class="section">
                <div class="card">
                    <div class="card-header">
                        <div class="card-header-left"><i data-lucide="star" class="card-icon"></i><h2 class="card-title">Badges & Spinners</h2></div>
                    </div>
                    <div class="card-body">
                    <h5>Badges</h5>
                    <div class="demo-row">
                        <span class="badge">Default</span>
                        <span class="badge badge-primary">Primary</span>
                        <span class="badge badge-success">Success</span>
                        <span class="badge badge-warning">Warning</span>
                        <span class="badge badge-error">Error</span>
                        <span class="badge badge-info">Info</span>
                    </div>
                    
                    <h5>Spinners</h5>
                    <div class="demo-row">
                        <div class="loading-spinner" style="border-color: color-mix(in srgb, var(--primary) 30%, transparent); border-top-color: var(--primary); width: 32px; height: 32px; border-width: 4px;"></div>
                        <div class="loading-spinner" style="border-color: color-mix(in srgb, var(--success) 30%, transparent); border-top-color: var(--success); width: 32px; height: 32px; border-width: 4px;"></div>
                        <div class="loading-spinner" style="border-color: color-mix(in srgb, var(--warning) 30%, transparent); border-top-color: var(--warning); width: 32px; height: 32px; border-width: 4px;"></div>
                        <div class="loading-spinner" style="border-color: color-mix(in srgb, var(--error) 30%, transparent); border-top-color: var(--error); width: 32px; height: 32px; border-width: 4px;"></div>
                        <div class="loading-spinner" style="border-color: color-mix(in srgb, var(--info) 30%, transparent); border-top-color: var(--info); width: 32px; height: 32px; border-width: 4px;"></div>
                        <div id="dynamic-spinner"></div>
                    </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    
    <script>
        // Initialize page
        document.addEventListener('DOMContentLoaded', () => {
            // Create navigation panel
            const navSections = [
                {
                    title: 'Overview',
                    items: [
                        { id: 'intro', text: 'Introduction', icon: 'info', active: true, onclick: () => scrollToSection('buttons') },
                        { id: 'getting-started', text: 'Getting Started', icon: 'play', onclick: () => UI.toast('Getting Started', 'info') }
                    ]
                },
                {
                    title: 'Components',
                    items: [
                        { id: 'buttons', text: 'Buttons', icon: 'mouse-pointer', onclick: () => scrollToSection('buttons') },
                        { id: 'toasts', text: 'Toast Notifications', icon: 'bell', badge: '4', onclick: () => scrollToSection('toast') },
                        { id: 'cards', text: 'Cards', icon: 'square', onclick: () => scrollToSection('cards') },
                        { id: 'modals', text: 'Modals', icon: 'layers', onclick: () => scrollToSection('modals') },
                        { id: 'tooltips', text: 'Tooltips & Popovers', icon: 'message-circle', onclick: () => scrollToSection('tooltips') },
                        { id: 'menus', text: 'Menus', icon: 'menu', onclick: () => scrollToSection('menus') },
                        { id: 'forms', text: 'Forms', icon: 'edit', onclick: () => scrollToSection('forms') },
                        { id: 'tags', text: 'Tags', icon: 'tag', onclick: () => scrollToSection('tags') }
                    ]
                },
                {
                    title: 'Layout',
                    items: [
                        { id: 'grid', text: 'Grid System', icon: 'grid', onclick: () => scrollToSection('grid') },
                        { id: 'panels', text: 'Panels', icon: 'layout', onclick: () => scrollToSection('panels') },
                        { id: 'typography', text: 'Typography', icon: 'type', onclick: () => scrollToSection('typography') }
                    ]
                },
                {
                    title: 'Utilities',
                    items: [
                        { id: 'badges', text: 'Badges & Spinners', icon: 'star', onclick: () => scrollToSection('badges') },
                        { id: 'colors', text: 'Colors', icon: 'palette', onclick: () => scrollToSection('colors') }
                    ]
                }
            ];
            
            // Create and add navigation panel
            const navPanel = UI.navPanel(navSections, {
                title: 'FileUI Components',
                icon: 'book-open'
            });
            document.body.insertBefore(navPanel, document.body.firstChild);
            
            // Create and add navigation toggle (always visible)
            const navToggle = UI.navToggle();
            document.body.insertBefore(navToggle, document.body.firstChild);
            
            // Create dynamic components
            const btnContainer = document.getElementById('dynamic-buttons');
            btnContainer.appendChild(UI.button('Save', { variant: 'primary', icon: 'save' }));
            btnContainer.appendChild(UI.button('Delete', { icon: 'trash-2', onclick: () => UI.toast('Deleted!', 'error') }));
            btnContainer.appendChild(UI.button('Settings', { icon: 'settings', size: 'sm' }));
            
            const cardContainer = document.getElementById('card-demo');
            cardContainer.appendChild(UI.card('Simple Card', 'This is a simple card with just title and content.'));
            
            cardContainer.appendChild(UI.card('Card with Icon', 'This card has an icon in the header.', {
                icon: 'star'
            }));
            
            cardContainer.appendChild(UI.card('Card with Actions', 'This card has action buttons in the header.', {
                actions: [
                    { icon: 'edit', onclick: () => UI.toast('Edit clicked!', 'info') },
                    { icon: 'trash-2', variant: 'error', onclick: () => UI.toast('Delete clicked!', 'error') }
                ]
            }));
            
            cardContainer.appendChild(UI.card('Full Featured Card', 'This card has an icon, actions, and a footer.', {
                icon: 'settings',
                description: 'Complete example with all options',
                actions: [
                    { text: 'Save', icon: 'save', variant: 'primary', onclick: () => UI.toast('Saved!', 'success') },
                    { icon: 'more-horizontal', onclick: () => UI.toast('More options', 'info') }
                ],
                footer: '<div class="demo-row"><span class="tag tag-success">Active</span><span class="tag tag-info">Featured</span></div>'
            }));
            
            cardContainer.appendChild(UI.card('Card with Description', 'Card content goes here...', {
                description: 'This card has a description'
            }));
            
            cardContainer.appendChild(UI.card('Card with Footer', 'Main content area', {
                footer: '<button class="btn btn-sm">Action</button>'
            }));
            
            const spinnerContainer = document.getElementById('dynamic-spinner');
            spinnerContainer.appendChild(UI.spinner({ size: '32px' }));
            
            // Create dynamic tooltip and popover
            const tooltipBtn = document.getElementById('dynamic-tooltip');
            UI.tooltip(tooltipBtn, 'This tooltip was added dynamically!');
            
            // Add working popover to static button
            const staticPopoverBtn = document.getElementById('static-popover');
            UI.popover(staticPopoverBtn, `
                <button class="popover-item">
                    <i data-lucide="edit"></i> Edit
                </button>
                <button class="popover-item">
                    <i data-lucide="copy"></i> Copy
                </button>
                <div class="popover-divider"></div>
                <button class="popover-item">
                    <i data-lucide="trash-2"></i> Delete
                </button>
            `, { title: 'Static Popover' });
            
            const popoverBtn = document.getElementById('dynamic-popover');
            UI.popover(popoverBtn, `
                <p>This popover was created with JavaScript!</p>
                <button class="btn btn-sm" onclick="UI.toast('Popover action!', 'info')">Action</button>
            `, { title: 'Dynamic Popover' });
            
            // Initialize icons
            UI.icons();
            
            // Add tooltips to elements that don't have them
            addMissingTooltips();
            
            // Make the static tooltip work
            const staticTooltipWrapper = document.querySelector('.tooltip-wrapper');
            const staticTooltip = staticTooltipWrapper.querySelector('.tooltip');
            
            staticTooltipWrapper.addEventListener('mouseenter', () => {
                // Position tooltip intelligently
                const rect = staticTooltipWrapper.getBoundingClientRect();
                const tooltipRect = staticTooltip.getBoundingClientRect();
                const viewportWidth = window.innerWidth;
                const viewportHeight = window.innerHeight;
                const margin = 12;
                
                let position = 'top';
                let left, top, transform = '';
                
                // Determine best position based on available space
                const spaceAbove = rect.top;
                const spaceBelow = viewportHeight - rect.bottom;
                const spaceLeft = rect.left;
                const spaceRight = viewportWidth - rect.right;
                
                // Try positions in order of preference: top, bottom, right, left
                if (spaceAbove >= tooltipRect.height + margin) {
                    position = 'top';
                    left = rect.left + rect.width / 2;
                    top = rect.top - tooltipRect.height - margin;
                    transform = 'translateX(-50%)';
                } else if (spaceBelow >= tooltipRect.height + margin) {
                    position = 'bottom';
                    left = rect.left + rect.width / 2;
                    top = rect.bottom + margin;
                    transform = 'translateX(-50%)';
                } else if (spaceRight >= tooltipRect.width + margin) {
                    position = 'right';
                    left = rect.right + margin;
                    top = rect.top + rect.height / 2;
                    transform = 'translateY(-50%)';
                } else {
                    position = 'left';
                    left = rect.left - tooltipRect.width - margin;
                    top = rect.top + rect.height / 2;
                    transform = 'translateY(-50%)';
                }
                
                // Apply position and styling
                staticTooltip.setAttribute('data-position', position);
                staticTooltip.style.left = left + 'px';
                staticTooltip.style.top = top + 'px';
                staticTooltip.style.transform = transform;
            });
        });
        
        // Helper function to scroll to sections
        function scrollToSection(sectionName) {
            const sections = document.querySelectorAll('.section');
            sections.forEach((section, index) => {
                const titleElement = section.querySelector('.card-title, .section-title');
                if (titleElement && titleElement.textContent.toLowerCase().includes(sectionName)) {
                    section.scrollIntoView({ behavior: 'smooth' });
                }
            });
        }
        
        // Modal examples
        function showSimpleModal() {
            UI.modal('This is a simple modal with just content.', {
                title: 'Simple Modal'
            });
        }
        
        function showConfirmModal() {
            UI.modal('Are you sure you want to delete this file?', {
                title: 'Confirm Delete',
                actions: [
                    { text: 'Cancel', variant: 'default' },
                    { 
                        text: 'Delete', 
                        variant: 'error',
                        onclick: () => UI.toast('File deleted!', 'success')
                    }
                ]
            });
        }
        
        function showFormModal() {
            const formHTML = `
                <div class="form-group">
                    <label class="form-label">Name</label>
                    <input type="text" class="form-input" placeholder="Enter name...">
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" placeholder="Enter email...">
                </div>
            `;
            
            UI.modal(formHTML, {
                title: 'User Form',
                actions: [
                    { text: 'Cancel' },
                    { 
                        text: 'Save', 
                        variant: 'primary',
                        onclick: () => UI.toast('Form saved!', 'success')
                    }
                ]
            });
        }
        
        // Menu functions
        function showMenu(button) {
            document.querySelectorAll('.menu').forEach(menu => menu.remove());
            
            const menu = UI.menu([
                { text: 'New File', icon: 'file-plus', onclick: () => UI.toast('New file created', 'success') },
                { text: 'New Folder', icon: 'folder-plus', onclick: () => UI.toast('New folder created', 'success') },
                { divider: true },
                { text: 'Settings', icon: 'settings', onclick: () => UI.toast('Settings opened', 'info') },
                { text: 'Help', icon: 'help-circle', onclick: () => UI.toast('Help opened', 'info') }
            ]);
            
            const rect = button.getBoundingClientRect();
            menu.style.position = 'fixed';
            menu.style.left = rect.left + 'px';
            menu.style.top = rect.bottom + 5 + 'px';
            menu.classList.add('active');
            
            document.body.appendChild(menu);
            
            const closeMenu = (e) => {
                if (!menu.contains(e.target) && e.target !== button) {
                    menu.classList.remove('active');
                    setTimeout(() => menu.remove(), 150);
                    document.removeEventListener('click', closeMenu);
                }
            };
            setTimeout(() => document.addEventListener('click', closeMenu), 0);
        }
        
        function showContextMenuDemo() {
            const contextMenu = UI.contextMenu([
                { text: 'Copy', icon: 'copy', onclick: () => UI.toast('Copied!', 'success') },
                { text: 'Cut', icon: 'scissors', onclick: () => UI.toast('Cut!', 'success') },
                { text: 'Paste', icon: 'clipboard', onclick: () => UI.toast('Pasted!', 'success') },
                { divider: true },
                { text: 'Delete', icon: 'trash-2', onclick: () => UI.toast('Deleted!', 'error') }
            ]);
            
            contextMenu.show(window.innerWidth / 2, window.innerHeight / 2);
        }
        
        // Navigation menu configuration functions
        function showNavMenuConfig() {
            const configCode = `// Navigation Panel Menu Configuration
const navSections = [
    {
        title: 'Overview',
        items: [
            { id: 'intro', text: 'Introduction', icon: 'info', active: true, onclick: () => scrollToSection('buttons') },
            { id: 'getting-started', text: 'Getting Started', icon: 'play', onclick: () => UI.toast('Getting Started', 'info') }
        ]
    },
    {
        title: 'Components',
        items: [
            { id: 'buttons', text: 'Buttons', icon: 'mouse-pointer', onclick: () => scrollToSection('buttons') },
            { id: 'toasts', text: 'Toast Notifications', icon: 'bell', badge: '4', onclick: () => scrollToSection('toast') },
            { id: 'cards', text: 'Cards', icon: 'square', onclick: () => scrollToSection('cards') },
            { id: 'modals', text: 'Modals', icon: 'layers', onclick: () => scrollToSection('modals') },
            { id: 'tooltips', text: 'Tooltips & Popovers', icon: 'message-circle', onclick: () => scrollToSection('tooltips') },
            { id: 'menus', text: 'Menus', icon: 'menu', onclick: () => scrollToSection('menus') },
            { id: 'forms', text: 'Forms', icon: 'edit', onclick: () => scrollToSection('forms') },
            { id: 'tags', text: 'Tags', icon: 'tag', onclick: () => scrollToSection('tags') }
        ]
    },
    {
        title: 'Layout',
        items: [
            { id: 'grid', text: 'Grid System', icon: 'grid', onclick: () => scrollToSection('grid') },
            { id: 'panels', text: 'Panels', icon: 'layout', onclick: () => scrollToSection('panels') },
            { id: 'typography', text: 'Typography', icon: 'type', onclick: () => scrollToSection('typography') }
        ]
    },
    {
        title: 'Utilities',
        items: [
            { id: 'badges', text: 'Badges & Spinners', icon: 'star', onclick: () => scrollToSection('badges') },
            { id: 'colors', text: 'Colors', icon: 'palette', onclick: () => scrollToSection('colors') }
        ]
    }
];

// Create navigation panel
const navPanel = UI.navPanel(navSections, {
    title: 'FileUI Components',
    icon: 'book-open'
});`;

            UI.modal(`<pre><code>${configCode}</code></pre>`, {
                title: 'Navigation Panel Menu Configuration',
                size: 'lg'
            });
        }
        
        function recreateNavPanel() {
            // Remove existing nav panel
            const existingPanel = document.getElementById('nav-panel');
            if (existingPanel) {
                existingPanel.remove();
            }
            
            // Remove existing toggle
            const existingToggle = document.querySelector('.nav-panel-toggle');
            if (existingToggle) {
                existingToggle.remove();
            }
            
            // Create new nav panel with updated config
            const newNavSections = [
                {
                    title: 'Demo Sections',
                    items: [
                        { id: 'new-item', text: 'New Item', icon: 'plus', onclick: () => UI.toast('New item clicked!', 'success') },
                        { id: 'buttons', text: 'Buttons', icon: 'mouse-pointer', onclick: () => scrollToSection('buttons') },
                        { id: 'menus', text: 'Menus', icon: 'menu', active: true, onclick: () => scrollToSection('menus') }
                    ]
                }
            ];
            
            const navPanel = UI.navPanel(newNavSections, {
                title: 'Demo Menu Config',
                icon: 'settings'
            });
            document.body.insertBefore(navPanel, document.body.firstChild);
            
            const navToggle = UI.navToggle();
            document.body.insertBefore(navToggle, document.body.firstChild);
            
            UI.toast('Navigation panel recreated with demo config!', 'info');
        }
        
        // Panel functions
        function addPanel() {
            const container = document.getElementById('panels-container');
            const panel = UI.panel('Sample Panel', 'This is a regular panel with some content.', {
                icon: 'layout'
            });
            container.appendChild(panel);
        }
        
        function addCollapsiblePanel() {
            const container = document.getElementById('panels-container');
            const panel = UI.panel('Collapsible Panel', 'This panel can be collapsed and expanded.', {
                icon: 'chevron-down',
                collapsible: true
            });
            container.appendChild(panel);
        }
        
        // Tag functions
        let tagCounter = 1;
        function addTag() {
            const container = document.getElementById('tags-container');
            const variants = ['primary', 'success', 'warning', 'error', 'info'];
            const variant = variants[Math.floor(Math.random() * variants.length)];
            
            const tag = UI.tag(`Tag ${tagCounter}`, { variant });
            container.appendChild(tag);
            tagCounter++;
        }
        
        function addClosableTag() {
            const container = document.getElementById('tags-container');
            const variants = ['primary', 'success', 'warning', 'error', 'info'];
            const variant = variants[Math.floor(Math.random() * variants.length)];
            
            const tag = UI.tag(`Closable ${tagCounter}`, { 
                variant, 
                closable: true,
                onClose: () => UI.toast('Tag removed!', 'info')
            });
            container.appendChild(tag);
            tagCounter++;
        }
        
        // Function to add tooltips to elements that don't have them
        function addMissingTooltips() {
            // Add tooltips to all buttons without existing tooltips
            document.querySelectorAll('button:not(.tooltip-wrapper button)').forEach(button => {
                if (!button.closest('.tooltip-wrapper') && !button.title) {
                    // Create tooltip text based on button content or class
                    let tooltipText = '';
                    if (button.classList.contains('theme-toggle-panel')) {
                        tooltipText = 'Toggle dark/light theme';
                    } else if (button.classList.contains('font-toggle')) {
                        tooltipText = button.title || 'Change font family';
                    } else if (button.classList.contains('density-toggle')) {
                        tooltipText = button.title || 'Change layout density';
                    } else if (button.classList.contains('nav-panel-toggle')) {
                        tooltipText = 'Toggle navigation panel';
                    } else if (button.textContent.trim()) {
                        tooltipText = `Click to ${button.textContent.trim().toLowerCase()}`;
                    } else {
                        tooltipText = 'Interactive button';
                    }
                    
                    // Add tooltip using our UI system
                    UI.tooltip(button, tooltipText);
                }
            });
            
            // Add tooltips to nav items that don't have them
            document.querySelectorAll('.nav-item').forEach(item => {
                if (!item.closest('.tooltip-wrapper') && !item.title) {
                    const text = item.textContent.trim();
                    UI.tooltip(item, `Navigate to ${text} section`);
                }
            });
        }
    </script>
</body>
</html>