<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FileUI Debug Test</title>
    
    <!-- Load styles -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Load Lucide icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Load UI system -->
    <script src="styles.js"></script>
</head>
<body>
    <h1>FileUI Debug Test</h1>
    
    <h2>Icon Test</h2>
    <div id="icon-test">
        <i data-lucide="home"></i>
        <i data-lucide="user"></i>
        <i data-lucide="settings"></i>
    </div>
    
    <h2>Panel Test</h2>
    <div id="panel-test"></div>
    
    <h2>Console Output</h2>
    <pre id="console-output"></pre>
    
    <script>
        // Capture console logs
        const consoleOutput = document.getElementById('console-output');
        const originalLog = console.log;
        const originalError = console.error;
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            consoleOutput.textContent += 'LOG: ' + args.join(' ') + '\n';
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            consoleOutput.textContent += 'ERROR: ' + args.join(' ') + '\n';
        };
        
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOMContentLoaded fired');
            
            // Test 1: Check if lucide is loaded
            console.log('Lucide loaded:', typeof lucide !== 'undefined');
            
            // Test 2: Try to initialize icons manually
            if (typeof lucide !== 'undefined') {
                console.log('Attempting to create icons...');
                lucide.createIcons();
                console.log('Icons created');
            } else {
                console.error('Lucide is not defined!');
            }
            
            // Test 3: Check if UI is loaded
            console.log('UI loaded:', typeof UI !== 'undefined');
            
            // Test 4: Try to create a panel
            if (typeof UI !== 'undefined') {
                console.log('Creating test panel...');
                const panel = UI.panel('Test Panel', 'This is a test panel content', {
                    icon: 'layout',
                    collapsible: true
                });
                document.getElementById('panel-test').appendChild(panel);
                console.log('Panel created');
                
                // Initialize icons again
                UI.icons();
            } else {
                console.error('UI is not defined!');
            }
            
            // Test 5: Check for any errors in network requests
            console.log('Checking network resources...');
        });
        
        // Listen for errors
        window.addEventListener('error', (e) => {
            console.error('Window error:', e.message, e.filename, e.lineno, e.colno);
        });
    </script>
</body>
</html>